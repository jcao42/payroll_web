<!DOCTYPE html>
<html>
<head>
    <title>Payroll Tracker</title>
    <script>
        function setTodayDate() {
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2, '0');
            const dd = String(today.getDate()).padStart(2, '0');
            document.getElementById('date').value = `${yyyy}-${mm}-${dd}`;
        }
        window.onload = setTodayDate;
    </script>
</head>
<body>
    <h1>Payroll Tracker</h1>

    {% if not show_form %}
        <form method="POST">
            <label>How many employees today?</label>
            <input type="number" name="num_employees" min="1" required>
            <button type="submit">Next</button>
        </form>
    {% endif %}

    {% if show_form %}
        <form method="POST" action="/results">
            <input type="hidden" name="date" id="date">
            {% for i in range(1, num_employees + 1) %}
                <h3>Employee {{ i }}</h3>
                <label>Name:</label>
                <input type="text" name="name_{{ i }}" required><br>
                <label>Hourly Rate:</label>
                <input type="number" name="rate_{{ i }}" step="0.01" required><br>
                {% for day in ['sun','mon','tue','wed','thu','fri','sat'] %}
                    <label>{{ day.capitalize() }} Hours:</label>
                    <input type="number" name="{{ day }}_{{ i }}" step="0.1" value="0"><br>
                {% endfor %}
                <hr>
            {% endfor %}
            <button type="submit">Submit Payroll</button>
        </form>
    {% endif %}
</body>
</html>
